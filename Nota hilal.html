<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Nota Penjualan 55mm</title>
  <style>
    html, body {
  margin: 0;
  padding: 0;
    }
    @media print {
      @page {
        size: 55mm auto;
        margin: 0;
      }
    }

    body {
      font-family: monospace;
      width: 55mm;
      margin: 0 auto;
      padding: 0;
      font-size: 10pt;
    }

    h2, h4 {
      text-align: center;
      margin: 0;
    }

    p {
      margin: 4px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 5px;
    }

    th, td {
      padding: 2px 0;
      text-align: left;
      font-size: 9pt;
    }

    tfoot td {
      border-top: 1px dashed #000;
      font-weight: bold;
    }

    .center {
      text-align: center;
    }

    .divider {
      border-top: 1px solid #000;
      margin: 2px 0;
    }

    .print-btn {
      display: none;
    }

    @media screen {
      .print-btn {
        display: block;
        margin-top: 10px;
        text-align: center;
      }
    }
  </style>
</head>
<body>

    <h2>TOKO ABC</h2>
  <h4>Jl. Contoh No.123</h4>
  <div class="center">Telp: 08123456789</div>
  <div class="divider"></div>
<p>Tanggal: {{tanggal}}</p>
<p>Pelanggan: {{pelanggan}}</p>
  <table>
    <thead>
      <tr>
        <th colspan="2">Description</th>
        <th style="text-align:right">Sub Total</th>
    </tr>
    </thead>
    <tbody>
      <!-- Diisi lewat JS -->
    </tbody>
    <tfoot>
      <tr>
        <td colspan="2" style="text-align:center">Total</td>
        <td style="text-align:right" id="total"></td>
      </tr>
    </tfoot>
  </table>
  <div class="center">Terima kasih!</div>

<script>
  const params = new URLSearchParams(window.location.search);

  // Ambil parameter
  const tanggal = params.get("tanggal") || "";
  const pelanggan = params.get("pelanggan") || "";
  const items = params.get("items") || "";
  const total = params.get("total") || "0";

  // Isi tanggal dan pelanggan
  document.body.innerHTML = document.body.innerHTML.replace("{{tanggal}}", tanggal);
  document.body.innerHTML = document.body.innerHTML.replace("{{pelanggan}}", pelanggan);
  document.getElementById("total").innerText = parseInt(total).toLocaleString();

  // Isi tabel item
  const tbody = document.querySelector("tbody");

  if (items) {
    const data = items.split(",");
    data.forEach(item => {
      const [nama, qty, harga] = item.split("|");
      const subtotal = parseInt(qty) * parseInt(harga);

      tbody.innerHTML += `
        <tr>
          <td colspan="2">
            <div style="font-weight:bold">${nama}</div>
            <div style="font-size:8pt">${qty} x ${parseInt(harga).toLocaleString()}</div>
          </td>
          <td style="text-align:right; vertical-align:top">
            ${subtotal.toLocaleString()}
          </td>
        </tr>
      `;
    });
  }
</script>


</body>
</html>
